$(document).ready(function(){var e={},o=function(){return"WuWoo_"+moment().format("HH_mm_SSS")+"_"+Math.random().toString(36).substr(2,16)},i=new function(e,i,n,a){this.id=o(),this.title=e,this.episode=i,this.writtenBy=n,this.facebookId=a,this.messages=[],this.audio=[],this.bg_images=[],this.users=[],this.themeSound=""}("Title New ",1,"Lwin Moe Paing","greenmoezat");console.log(i);$(".colorBox").each(function(e,o){$(o).css("background-color",$(o).data("color")),$(o).click(function(){$("#HexCodeAdd").val($(o).data("color").replace(/#/g,""))})}),$("#AddNameFormClick").click(function(){var n,a,s,d=$("#NameAdd").val(),l=$("#HexCodeAdd").val(),t=$("input[name=Position_Radio]:checked","#AddNameForm").val();if(0==(d=d.trim()).length||" "==d||"  "==d||l.length<6||" "==l||"  "==l)return alert("Error"),!1;l="#"+l,i.users.push(new function(e,i,n){null==n&&(n="Left"),this.id=o(),this.name=e,this.color=i,this.position=n}(d,l,t)),(n=i.users[i.users.length-1].id,a=d,s=l,$("<li>",{class:"list-group-item text-white",style:"background-color:"+s,"data-color":s,id:n}).append($("<div>",{class:"row"}).append($("<div>",{class:"col-8"}).append($("<button>",{type:"button",class:"btn btn-outline-light btn-sm btn-block Update_Name","data-id":n,"data-color":s}).html(a).click(function(){var o=$(this).data("id");if(o==e.id)return e={},$(this).removeClass("active"),!1;$("#UserListShow > li button.active").removeClass("active"),$(this).addClass("active"),i.users.map(function(i,n){var a=JSON.parse(JSON.stringify(i));o==a.id&&(e=a)}),$("#AddedMessage").focus(),console.log(e)}))).append($("<div>",{class:"col-4","data-id":n,"data-color":s}).append($("<button>",{type:"button",class:"btn btn-light btn-sm Update_Color","data-id":n,"data-color":s}).html(s).click(function(){$("#UserEditModel").modal("show");var e="",o=$(this).data("id");i.users.map(function(i,n){i.id==o&&(e=i)}),$("#NameEditAdd").val(e.name),$("#HexCodeEditAdd").val(e.color.replace(/#/,"")),$("#NameEditUserId").val(e.id),"Left"==e.position&&$("#Left_Edit_Radio").prop("checked",!0),"Right"==e.position&&$("#Right_Edit_Radio").prop("checked",!0)}))))).appendTo("#UserListShow"),console.log(i),$("#NameAdd").val(""),$("#HexCodeAdd").val("")}),$("#AddNameEditFormClick").click(function(){var o=$("#NameEditUserId").val(),n=$("#NameEditAdd").val(),a="#"+$("#HexCodeEditAdd").val(),s=$("input[name=Edit_Position_Radio]:checked","#AddNameEditForm").val(),d={oldName:"",changeName:!1,oldPosition:"",changePosition:!1,oldColor:"",changeColor:!1},l=$("#"+o)[0].children[0].children[0].children[0],t=$("#"+o)[0].children[0].children[1].children[0];$(l).html(n),$(t).html(a),$("#"+o).css("background-color",a),i.users.map(function(e){e.id==o&&(e.position!=s&&(d.changePosition=!0,d.oldPosition=e.position,e.position=s),e.color!=a&&(d.changeColor=!0,d.oldColor=e.color,e.color=a),e.name!=n&&(d.changeName=!0,d.oldName=e.name,e.name=n))}),(d.changeColor||d.changeName||d.changePosition)&&((d.changePosition||d.changeColor)&&(console.log("Change Position Or Change Color"),i.messages.map(function(e,i){if(e.user_id==o&&"message"==e.type){e.position=s;var n=$("#"+e.id)[0].children[0].children[0],l=$("#"+e.id)[0].children[1].children[0];$(n).removeClass(d.oldPosition),$(n).addClass(s),$(l).removeClass(d.oldPosition),$(l).addClass(s),e.color=a;var t=$("li#"+e.id)[0].children[0].children[0],c=$("li#"+e.id)[0].children[1].children[0].children[0];$(t).css("background-color",a),$(c).css("color",a)}})),d.changeName&&(console.log("Change Name"),i.messages.map(function(e,i){if(e.user_id==o){e.name=n;var a=$("li#"+e.id)[0].children[1].children[0].children[0];$(a).html(n)}}))),e={},$("#UserListShow button.active").removeClass("active"),console.log("After Edit=>",i),$("#UserEditModel").modal("hide")}),$("#AddedMessageButton").click(function(){var n=$("#AddedMessage").val();if(!Object.keys(e).length||"object"!=typeof e||0==n.length||n.trim().length<=1)return alert("Error"),!1;var a,s,d,l,t,c=o(),r=new function(e,o,i,n,a,s,d){null==n&&(n="Left"),null==a&&(a="message"),this.id=e,this.name=o,this.user_id=i,this.position=n,this.type=a,this.message=s,this.vibrate=!1,this.vibrate_pattern=[],this.background_change=!1,this.background_image="",this.audio=!1,this.audio_url="",this.color=d}(c,e.name,e.id,e.position,"message",n,e.color);i.messages.push(r),(a=c,s=n,d=e.position,l=e.name,t=e.color,$("<li>",{class:"Li",id:a}).append($("<div>",{class:"Message"}).append($("<span>",{class:d,style:"background-color: "+t}).html(s))).append($("<div>",{class:"NameAndEdit"}).append($("<div>",{class:"NameAndEditContainer "+d}).append($("<span>",{class:"Name",style:"color:"+t}).html(l)).append($("<span>",{class:"button"}).append($("<i>",{class:"icon ion-md-play"}))).append($("<span>",{class:"button"}).append($("<i>",{class:"icon ion-ios-cellular"}))).append($("<span>",{class:"button"}).append($("<i>",{class:"icon ion-ios-image"}))).append($("<span>",{class:"button"}).append($("<i>",{class:"icon ion-ios-musical-notes"}))).append($("<span>",{class:"button text-danger"}).append($("<i>",{class:"icon ion-md-close"})))))).appendTo("#Admin_Message_Show_Ul"),$("#AddedMessage").val(""),$("#Admin_Message_Show_Container").stop().animate({scrollTop:$("#Admin_Message_Show_Container")[0].scrollHeight},500),$("#AddedMessage").focus()}),$("#AddedMessage").keyup(function(e){13==e.which&&$("#AddedMessageButton").click()});var n=function(e){return $("<li>",{class:"Pointer"}).append($("<i>",{class:"icon ion-md-folder"})).append($("<span>").html(" "+e+" ")).append($("<span>",{class:"Folder_Loading d-none"}).append($("<img>",{src:"/images/loading/ghost_loading.svg"}))).click(function(){console.dir($(this));var e=$(this)[0].children[2];console.dir(e),$(e).removeClass("d-none"),setTimeout(function(){$(e).addClass("d-none"),$("#Audio_List ul li").remove();[{id:1,url:"/audio/ghost/door/door_1.mp3"}].map(function(e,o){$("#Audio_List ul").append(a(e.url))}),$("#Audio_List").removeClass("d-none")},1e3)})},a=function(e){return $("<li>",{class:"Pointer"}).append($("<div>").append($("<a>",{href:"#!",class:"mr-1"}).append($("<i>",{class:"icon ion-ios-musical-notes"})).append(" "+e+" ")).append($("<a>",{href:"#!",class:"ml-2"}).append($("<i>",{class:"icon ion-md-play"}))))};$("#ThemeAudio li").click(function(){var e=$(this)[0].children[2];$(e).removeClass("d-none"),setTimeout(function(){$(e).addClass("d-none");$("#ThemeAudio_List ul li").remove(),[{id:1,url:"/audio/ghost/theme/theme_1.mp3"}].map(function(e,o){$("#ThemeAudio_List ul").append(a(e.url))})},1e3)}),$("#Audio li").click(function(){var e=$(this)[0].children[2];$(e).removeClass("d-none"),setTimeout(function(){$(e).addClass("d-none"),$("#Audio").addClass("d-none"),$("#AudioInside li").remove(),$("#AudioInside").append(n("Door")),$("#AudioInside").append(n("Voice")),$("#AudioInside").removeClass("d-none")},1e3)}),$("#AudioFolderBack").click(function(){$("#AudioInside").addClass("d-none"),$("#Audio").removeClass("d-none"),$("#Audio_List ul li").remove()});var s=function(e){return $("<li>",{class:"Pointer"}).append($("<i>",{class:"icon ion-md-folder"})).append($("<span>").html(" "+e+" ")).append($("<span>",{class:"Folder_Loading d-none"}).append($("<img>",{src:"/images/loading/ghost_loading.svg"}))).click(function(){console.dir($(this));var e=$(this)[0].children[2];console.dir(e),$(e).removeClass("d-none"),setTimeout(function(){$(e).addClass("d-none"),$("#ImageFolder_List div").remove(),$("#ImageFolder_List").append(d("/images/wall_paper/Evil_With_Sword_in_Dark.jpg")),$("#ImageFolder_List").append(d("/images/story_card/Horror-City-Wallpaper-From-Game-800x600.jpg")),$("#ImageFolder_List").removeClass("d-none")},1e3)})},d=function(e){return $("<div>",{class:"col-6 ImageDiv",style:"background-image:url('"+e+"')"}).append(" ")};$("#ImageFolder li").click(function(){var e=$(this)[0].children[2];$(e).removeClass("d-none"),setTimeout(function(){$(e).addClass("d-none"),$("#ImageFolder").addClass("d-none"),$("#ImageFolderInside li").remove(),$("#ImageFolderInside").append(s("House")),$("#ImageFolderInside").append(s("Fields")),$("#ImageFolderInside").append(s("Door")),$("#ImageFolderInside").removeClass("d-none")},1e3)}),$("#ImageFolderBack").click(function(){$("#ImageFolderInside").addClass("d-none"),$("#ImageFolder").removeClass("d-none"),$("#ImageFolder_List div").remove()})});